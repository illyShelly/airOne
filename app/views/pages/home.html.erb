<div class="container">
  <!-- search form with datepicker (form_tag) once hit redirect to search page with more options -->
  <%= form_tag search_path, method: :get do %>
    <div class="row">
      <div class="col-md-6">
        <%= text_field_tag :search, params[:search], placeholder: "What's your destination?", class: "form-control" %>
      </div>
      <div class="col-md-3">
        <%= text_field_tag :start_date, params[:start_date], placeholder: "Check-in", class: "form-control datepicker" %>
      </div>
      <div class="col-md-3">
        <%= text_field_tag :end_date, params[:end_date], placeholder: "Check-out", class: "form-control datepicker" %>
      </div>
    </div>
    <br><br>

    <!-- submit button -->
    <div class="row">
      <div class="col-md-offset-4 col-md-4">
        <%= submit_tag "Search", class: "btn btn-form btn-block" %>
      </div>
    </div>
  <% end %>

  <br><br><br>

  <!-- HOMES -->
  <div><h3>Homes</h3></div>
  <br>
  <!-- show 3 active rooms on the page -->
  <div class="row">
    <% @rooms.each do |room| %>
      <div class="col-md-3">
        <div class="panel panel-default">
          <div class="preview">
            <%= link_to room_path(room)do %>
              <%= image_tag room.cover_photo(resize: '300x200!>'), class: 'image-present' %>
            <% end %>
          </div>
          <div class="panel-body">
            <%= link_to room.listing_name, room %>
          </div>
        </div>

      </div>
    <% end %>
  </div>
</div>

<!-- in reservation form datepicker -->
<!--   // $(function() {
  //   $("#autolocation").geocomplete();
  // }) -->
<script>

  $('#start_date').datepicker({
    dateFormat: 'dd-mm-yy',
    minDate: 0,
    maxDate: '3m',
    onSelect: function(selected) {
      $('#end_date').datepicker("option", "minDate", selected);
      $('#end_date').attr("disabled", false);
    }
  });

  $('#end_date').datepicker({
    dateFormat: 'dd-mm-yy',
    minDate: 0,
    maxDate: '3m',
    onSelect: function(selected) {
      $('#start_date').datepicker("option", "maxDate", selected);
    }
  });
</script>

